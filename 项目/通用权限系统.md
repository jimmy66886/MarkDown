2023年1月19日 12点57分

# 通用权限系统

## 项目介绍

### 数据库设计

建立三张基本表
![20230119120806](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230119120806.png)

Sql语句:

```sql
# Host: localhost  (Version 5.7.19-log)
# Date: 2022-06-13 10:04:40
# Generator: MySQL-Front 6.1  (Build 1.26)

CREATE DATABASE `guigu-auth` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
use `guigu-auth`;

#
# Structure for table "sys_dept"
#

CREATE TABLE `sys_dept` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '' COMMENT '部门名称',
  `parent_id` bigint(20) DEFAULT '0' COMMENT '上级部门id',
  `tree_path` varchar(255) DEFAULT ',' COMMENT '树结构',
  `sort_value` int(11) DEFAULT '1' COMMENT '排序',
  `leader` varchar(20) DEFAULT NULL COMMENT '负责人',
  `phone` varchar(11) DEFAULT NULL COMMENT '电话',
  `status` tinyint(1) DEFAULT '1' COMMENT '状态（1正常 0停用）',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `update_time` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=2018 DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT COMMENT='组织机构';

#
# Data for table "sys_dept"
#

INSERT INTO `sys_dept` VALUES (1,'硅谷集团有限公司',0,',1,',1,'张老师','15659090912',1,'2022-05-24 16:13:13','2022-05-24 16:13:13',0),(10,'北京校区',1,',1,10,',1,'李老师','18790007789',1,'2022-05-24 16:13:15','2022-05-24 16:13:15',0),(20,'上海校区',1,',1,20,',1,'王老师','15090987678',1,'2022-05-25 14:02:25','2022-05-25 14:02:25',0),(30,'深圳校区',1,',1,30,',1,'李老师','15090987678',1,'2022-05-25 14:02:24','2022-05-25 14:02:24',0),(1010,'教学部分',10,',1,10,1010,',1,'李老师','15090987678',1,'2022-05-25 14:02:24','2022-05-25 14:02:24',0),(1020,'运营部门',10,',1,10,1020,',1,'王老师','15090987678',1,'2022-05-25 14:02:29','2022-05-25 14:02:29',0),(1021,'Java学科',1010,',1,10,1010,1021,',1,'王老师','15090987678',1,'2022-05-24 16:13:31','2022-05-24 16:13:31',0),(1022,'大数据学科',1010,',1,10,1010,1022,',1,'王老师','15090987678',1,'2022-05-25 14:02:22','2022-05-25 14:02:22',0),(1024,'前端学科',1010,',1,10,1010,1024,',1,'李老师','15090987678',1,'2022-05-25 14:02:22','2022-05-25 14:02:22',0),(1025,'客服',1020,',1,10,1020,1025,',1,'李老师','15090987678',1,'2022-05-25 14:02:23','2022-05-25 14:02:23',0),(1026,'网站推广',1020,',1,10,1020,1026,',1,'30.607366','15090987678',1,'2022-05-25 14:02:26','2022-05-25 14:02:26',0),(1027,'线下运营',1020,',1,10,1020,1027,',1,'李老师','15090987678',1,'2022-05-25 14:02:26','2022-05-25 14:02:26',0),(1028,'设计',1020,',1,10,1020,1028,',1,'李老师','15090987678',1,'2022-05-25 14:02:27','2022-05-25 14:02:27',0),(2012,'教学部门',20,',1,20,2012,',1,'王老师','18909890765',1,'2022-05-24 16:13:51','2022-05-24 16:13:51',0),(2013,'教学部门',30,',1,30,2013,',1,'李老师','18567867895',1,'2022-05-24 16:13:50','2022-05-24 16:13:50',0),(2016,'Java学科',2012,',1,20,2012,2012,',1,'张老师','15090909909',1,'2022-05-25 10:51:12','2022-05-25 10:51:12',0),(2017,'大数据学科',2012,',1,20,2012,2012,',1,'李老师','15090980989',1,'2022-05-27 09:11:54',NULL,0);

#
# Structure for table "sys_login_log"
#

CREATE TABLE `sys_login_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '访问ID',
  `username` varchar(50) DEFAULT '' COMMENT '用户账号',
  `ipaddr` varchar(128) DEFAULT '' COMMENT '登录IP地址',
  `status` tinyint(1) DEFAULT '0' COMMENT '登录状态（0成功 1失败）',
  `msg` varchar(255) DEFAULT '' COMMENT '提示信息',
  `access_time` datetime DEFAULT NULL COMMENT '访问时间',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `update_time` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='系统访问记录';

#
# Data for table "sys_login_log"
#

INSERT INTO `sys_login_log` VALUES (1,'admin','0:0:0:0:0:0:0:1',1,'登录成功',NULL,'2022-06-10 11:24:14',NULL,0),(2,'admin','127.0.0.1',1,'登录成功',NULL,'2022-06-10 11:53:43',NULL,0);

#
# Structure for table "sys_menu"
#

CREATE TABLE `sys_menu` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `parent_id` bigint(20) NOT NULL DEFAULT '0' COMMENT '所属上级',
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '名称',
  `type` tinyint(3) NOT NULL DEFAULT '0' COMMENT '类型(0:目录,1:菜单,2:按钮)',
  `path` varchar(100) DEFAULT NULL COMMENT '路由地址',
  `component` varchar(100) DEFAULT NULL COMMENT '组件路径',
  `perms` varchar(100) DEFAULT NULL COMMENT '权限标识',
  `icon` varchar(100) DEFAULT NULL COMMENT '图标',
  `sort_value` int(11) DEFAULT NULL COMMENT '排序',
  `status` tinyint(4) DEFAULT NULL COMMENT '状态(0:禁止,1:正常)',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`),
  KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB AUTO_INCREMENT=35 DEFAULT CHARSET=utf8mb4 COMMENT='菜单表';


#
# Data for table "sys_menu"
#

INSERT INTO `sys_menu` (`id`,`parent_id`,`name`,`type`,`path`,`component`,`perms`,`icon`,`sort_value`,`status`,`create_time`,`update_time`,`is_deleted`) VALUES (2,0,'系统管理',0,'system','Layout',NULL,'el-icon-s-tools',1,1,'2021-05-31 18:05:37','2022-06-09 09:23:24',0),(3,2,'用户管理',1,'sysUser','system/sysUser/list','','el-icon-s-custom',1,1,'2021-05-31 18:05:37','2022-06-09 09:22:47',0),(4,2,'角色管理',1,'sysRole','system/sysRole/list','','el-icon-user-solid',2,1,'2021-05-31 18:05:37','2022-06-09 09:37:18',0),(5,2,'菜单管理',1,'sysMenu','system/sysMenu/list','','el-icon-s-unfold',3,1,'2021-05-31 18:05:37','2022-06-09 09:37:21',0),(6,3,'查看',2,NULL,NULL,'bnt.sysUser.list',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(7,3,'添加',2,NULL,NULL,'bnt.sysUser.add',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(8,3,'修改',2,NULL,NULL,'bnt.sysUser.update',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(9,3,'删除',2,NULL,NULL,'bnt.sysUser.remove',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(10,4,'查看',2,NULL,NULL,'bnt.sysRole.list',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(11,4,'添加',2,NULL,NULL,'bnt.sysRole.add',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(12,4,'修改',2,NULL,NULL,'bnt.sysRole.update',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(13,4,'删除',2,NULL,NULL,'bnt.sysRole.remove',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(14,5,'查看',2,NULL,NULL,'bnt.sysMenu.list',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(15,5,'添加',2,NULL,NULL,'bnt.sysMenu.add',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(16,5,'修改',2,NULL,NULL,'bnt.sysMenu.update',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(17,5,'删除',2,NULL,NULL,'bnt.sysMenu.remove',NULL,1,1,'2021-05-31 18:05:37','2022-06-09 09:22:38',0),(18,3,'分配角色',2,NULL,NULL,'bnt.sysUser.assignRole',NULL,1,1,'2022-05-23 17:14:32','2022-06-09 09:22:38',0),(19,4,'分配权限',2,'assignAuth','system/sysRole/assignAuth','bnt.sysRole.assignAuth',NULL,1,1,'2022-05-23 17:18:14','2022-06-09 09:22:38',0),(20,2,'部门管理',1,'sysDept','system/sysDept/list','','el-icon-s-operation',4,1,'2022-05-24 10:07:05','2022-06-09 09:38:12',0),(21,20,'查看',2,NULL,NULL,'bnt.sysDept.list',NULL,1,1,'2022-05-24 10:07:44','2022-06-09 09:22:38',0),(22,2,'岗位管理',1,'sysPost','system/sysPost/list','','el-icon-more-outline',5,1,'2022-05-24 10:25:30','2022-06-09 09:38:13',0),(23,22,'查看',2,NULL,NULL,'bnt.sysPost.list',NULL,1,1,'2022-05-24 10:25:45','2022-06-09 09:22:38',0),(24,20,'添加',2,NULL,NULL,'bnt.sysDept.add',NULL,1,1,'2022-05-25 15:31:27','2022-06-09 09:22:38',0),(25,20,'修改',2,NULL,NULL,'bnt.sysDept.update',NULL,1,1,'2022-05-25 15:31:41','2022-06-09 09:22:38',0),(26,20,'删除',2,NULL,NULL,'bnt.sysDept.remove',NULL,1,1,'2022-05-25 15:31:59','2022-06-09 09:22:38',0),(27,22,'添加',2,NULL,NULL,'bnt.sysPost.add',NULL,1,1,'2022-05-25 15:32:44','2022-06-09 09:22:38',0),(28,22,'修改',2,NULL,NULL,'bnt.sysPost.update',NULL,1,1,'2022-05-25 15:32:58','2022-06-09 09:22:38',0),(29,22,'删除',2,NULL,NULL,'bnt.sysPost.remove',NULL,1,1,'2022-05-25 15:33:11','2022-06-09 09:22:38',0),(30,34,'操作日志',1,'sysOperLog','system/sysOperLog/list','','el-icon-document-remove',7,1,'2022-05-26 16:09:59','2022-06-09 09:39:23',0),(31,30,'查看',2,NULL,NULL,'bnt.sysOperLog.list',NULL,1,1,'2022-05-26 16:10:17','2022-06-09 09:22:38',0),(32,34,'登录日志',1,'sysLoginLog','system/sysLoginLog/list','','el-icon-s-goods',8,1,'2022-05-26 16:36:13','2022-06-09 09:39:24',0),(33,32,'查看',2,NULL,NULL,'bnt.sysLoginLog.list',NULL,1,1,'2022-05-26 16:36:31','2022-06-09 09:36:36',0),(34,2,'日志管理',0,'log','ParentView','','el-icon-tickets',6,1,'2022-05-31 13:23:07','2022-06-09 09:39:22',0);

#
# Structure for table "sys_oper_log"
#

CREATE TABLE `sys_oper_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '日志主键',
  `title` varchar(50) DEFAULT '' COMMENT '模块标题',
  `business_type` varchar(20) DEFAULT '0' COMMENT '业务类型（0其它 1新增 2修改 3删除）',
  `method` varchar(100) DEFAULT '' COMMENT '方法名称',
  `request_method` varchar(10) DEFAULT '' COMMENT '请求方式',
  `operator_type` varchar(20) DEFAULT '0' COMMENT '操作类别（0其它 1后台用户 2手机端用户）',
  `oper_name` varchar(50) DEFAULT '' COMMENT '操作人员',
  `dept_name` varchar(50) DEFAULT '' COMMENT '部门名称',
  `oper_url` varchar(255) DEFAULT '' COMMENT '请求URL',
  `oper_ip` varchar(128) DEFAULT '' COMMENT '主机地址',
  `oper_param` varchar(2000) DEFAULT '' COMMENT '请求参数',
  `json_result` varchar(2000) DEFAULT '' COMMENT '返回参数',
  `status` int(1) DEFAULT '0' COMMENT '操作状态（0正常 1异常）',
  `error_msg` varchar(2000) DEFAULT '' COMMENT '错误消息',
  `oper_time` datetime DEFAULT NULL COMMENT '操作时间',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `update_time` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=64 DEFAULT CHARSET=utf8 COMMENT='操作日志记录';

#
# Data for table "sys_oper_log"
#

INSERT INTO `sys_oper_log` VALUES (1,'角色管理','1','com.atguigu.auth.controller.SysRoleController.save()','POST','1','admin','','/admin/auth/sysRole/save','','{\"param\":{},\"roleCode\":\"\",\"roleName\":\"test\",\"id\":5}','{\"code\":200,\"message\":\"成功\"}',0,'',NULL,'2022-05-26 15:59:44',NULL,0),(2,'角色管理','DELETE','com.atguigu.auth.controller.SysRoleController.remove()','DELETE','MANAGE','admin','','/admin/auth/sysRole/remove/5','','','{\"code\":200,\"message\":\"成功\"}',0,'',NULL,'2022-05-26 16:05:27',NULL,0),(3,'角色管理','DELETE','com.atguigu.auth.controller.SysRoleController.remove()','DELETE','MANAGE','admin','','/admin/auth/sysRole/remove/4','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-26 16:52:40',NULL,0),(4,'角色管理','UPDATE','com.atguigu.auth.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1622507920000,\"param\":{},\"roleCode\":\"\",\"roleName\":\"普通管理员\",\"description\":\"普通管理员\",\"updateTime\":1645670566000,\"id\":2}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 08:47:54',NULL,0),(5,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"SysRole\",\"select\":false,\"level\":3,\"updateTime\":1653287810000,\"type\":1,\"parentId\":2,\"isDeleted\":0,\"children\":[{\"code\":\"btn.SysRole.list\",\"select\":false,\"level\":4,\"updateTime\":1622460772000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"id\":10},{\"code\":\"btn.SysRole.add\",\"select\":false,\"level\":4,\"updateTime\":1653547976000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"id\":11},{\"code\":\"btn.SysRole.update\",\"select\":false,\"level\":4,\"updateTime\":1653547981000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"id\":12},{\"code\":\"btn.SysRole.remove\",\"select\":false,\"level\":4,\"updateTime\":1622507874000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"id\":13},{\"code\":\"btn.SysRole.assignAuth\",\"select\":false,\"level\":4,\"toCode\":\"AssignAuth\",\"updateTime\":1653376735000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1653297494000,\"param\":{},\"name\":\"分配权限\",\"id\":19}],\"createTime\":1622455537000,\"param\":{},\"name\":\"角色管理\",\"id\":4}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 08:48:08',NULL,0),(6,'岗位管理','UPDATE','com.atguigu.auth.controller.SysPostController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysPost/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1653359648000,\"param\":{},\"name\":\"总经理\",\"description\":\"2\",\"postCode\":\"zjl\",\"id\":6,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 08:56:29',NULL,0),(7,'岗位管理','INSERT','com.atguigu.auth.controller.SysPostController.save()','POST','MANAGE','admin','','/admin/auth/sysPost/save','127.0.0.1','{\"param\":{},\"name\":\"网咨\",\"description\":\"\",\"postCode\":\"wz\",\"id\":7,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 08:56:37',NULL,0),(8,'岗位管理','DELETE','com.atguigu.auth.controller.SysPostController.remove()','DELETE','MANAGE','admin','','/admin/auth/sysPost/remove/7','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 08:56:41',NULL,0),(9,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"btn.sysDept.list\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653358064000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653358064000,\"param\":{},\"name\":\"查看\",\"id\":21}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:02:49',NULL,0),(10,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"btn.sysDept.add\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653463887000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463887000,\"param\":{},\"name\":\"添加\",\"id\":24}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:02:55',NULL,0),(11,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"btn.sysDept.update\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653463901000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463901000,\"param\":{},\"name\":\"修改\",\"id\":25}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:03:01',NULL,0),(12,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"btn.sysDept.remove\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653463919000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463919000,\"param\":{},\"name\":\"删除\",\"id\":26}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:03:07',NULL,0),(13,'部门管理','UPDATE','com.atguigu.auth.controller.SysDeptController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysDept/update','127.0.0.1','{\"leader\":\"张老师\",\"updateTime\":1653447072000,\"parentId\":2012,\"sortValue\":1,\"isDeleted\":0,\"createTime\":1653447072000,\"param\":{},\"phone\":\"15090909909\",\"name\":\"Java学科\",\"id\":2016,\"treePath\":\",1,20,2012,2012,\",\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:11:28',NULL,0),(14,'部门管理','INSERT','com.atguigu.auth.controller.SysDeptController.save()','POST','MANAGE','admin','','/admin/auth/sysDept/save','127.0.0.1','{\"leader\":\"李老师\",\"parentId\":2012,\"param\":{},\"phone\":\"15090980989\",\"name\":\"大数据学科\",\"id\":2017,\"treePath\":\",1,20,2012,2012,\"}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:11:54',NULL,0),(15,'部门管理','UPDATE','com.atguigu.auth.controller.SysDeptController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysDept/update','127.0.0.1','{\"leader\":\"李老师\",\"parentId\":2012,\"sortValue\":1,\"isDeleted\":0,\"createTime\":1653613914000,\"param\":{},\"phone\":\"15090980989\",\"name\":\"大数据学科\",\"id\":2017,\"treePath\":\",1,20,2012,2012,\",\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:16:38',NULL,0),(16,'角色管理','UPDATE','com.atguigu.auth.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1622507920000,\"param\":{},\"roleCode\":\"COMMON\",\"roleName\":\"普通管理员\",\"description\":\"普通管理员\",\"updateTime\":1645670566000,\"id\":2}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 09:28:15',NULL,0),(17,'角色管理','INSERT','com.atguigu.auth.controller.SysRoleController.save()','POST','MANAGE','admin','','/admin/auth/sysRole/save','127.0.0.1','{\"param\":{},\"roleCode\":\"\",\"roleName\":\"用户管理员\",\"id\":6}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 10:42:18',NULL,0),(18,'角色管理','UPDATE','com.atguigu.auth.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1653619337000,\"param\":{},\"roleCode\":\"\",\"roleName\":\"用户管理员\",\"updateTime\":1653619337000,\"id\":6}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-27 10:43:59',NULL,0),(19,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysUser\",\"select\":false,\"level\":3,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysUser/list\",\"sortValue\":1,\"component\":\"auth/sysUser/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysUser.list\",\"select\":false,\"level\":4,\"updateTime\":1653957062000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"id\":6,\"status\":1},{\"code\":\"bnt.sysUser.add\",\"select\":false,\"level\":4,\"updateTime\":1653957062000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"id\":7,\"status\":1},{\"code\":\"bnt.sysUser.update\",\"select\":false,\"level\":4,\"updateTime\":1653957062000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"id\":8,\"status\":1},{\"code\":\"bnt.sysUser.remove\",\"select\":false,\"level\":4,\"updateTime\":1653957062000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"id\":9,\"status\":1},{\"code\":\"bnt.sysUser.assignRole\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1653297272000,\"param\":{},\"name\":\"分配角色\",\"id\":18,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"用户管理\",\"perms\":\"bnt.sysUser.list\",\"id\":3,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:14:26',NULL,0),(20,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysRole\",\"select\":false,\"level\":3,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysRole/list\",\"sortValue\":0,\"component\":\"auth/sysRole/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysRole.list\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysRole.list\",\"id\":10,\"status\":1},{\"code\":\"bnt.sysRole.add\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysRole.add\",\"id\":11,\"status\":1},{\"code\":\"bnt.sysRole.update\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysRole.update\",\"id\":12,\"status\":1},{\"code\":\"bnt.sysRole.remove\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysRole.remove\",\"id\":13,\"status\":1},{\"code\":\"bnt.sysRole.assignAuth\",\"select\":false,\"level\":4,\"toCode\":\"assignAuth\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1653297494000,\"param\":{},\"name\":\"分配权限\",\"perms\":\"bnt.sysRole.assignAuth\",\"id\":19,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"角色管理\",\"perms\":\" bnt.sysRole.list\",\"id\":4,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:18:12',NULL,0),(21,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysMenu\",\"select\":false,\"level\":3,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysMenu/list\",\"sortValue\":0,\"component\":\"auth/sysMenu/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysMenu.list\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysMenu.list\",\"id\":14,\"status\":1},{\"code\":\"bnt.sysMenu.add\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysMenu.add\",\"id\":15,\"status\":1},{\"code\":\"bnt.sysMenu.update\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysMenu.update\",\"id\":16,\"status\":1},{\"code\":\"bnt.sysMenu.remove\",\"select\":false,\"level\":4,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysMenu.remove\",\"id\":17,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"菜单管理\",\"perms\":\"bnt.sysMenu.list\",\"id\":5,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:18:37',NULL,0),(22,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysDept\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysDept/list\",\"sortValue\":0,\"component\":\"auth/sysDept/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysDept.list\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653358064000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysDept.list\",\"id\":21,\"status\":1},{\"code\":\"bnt.sysDept.add\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463887000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysDept.add\",\"id\":24,\"status\":1},{\"code\":\"bnt.sysDept.update\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463901000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysDept.update\",\"id\":25,\"status\":1},{\"code\":\"bnt.sysDept.remove\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463919000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysDept.remove\",\"id\":26,\"status\":1}],\"createTime\":1653358025000,\"param\":{},\"name\":\"部门管理\",\"perms\":\"bnt.sysDept.list\",\"id\":20,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:19:04',NULL,0),(23,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysPost\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysPost/list\",\"sortValue\":0,\"component\":\"auth/sysPost/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysPost.list\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653359145000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysPost.list\",\"id\":23,\"status\":1},{\"code\":\"bnt.sysPost.add\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463964000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysPost.add\",\"id\":27,\"status\":1},{\"code\":\"bnt.sysPost.update\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463978000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysPost.update\",\"id\":28,\"status\":1},{\"code\":\"bnt.sysPost.remove\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463991000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysPost.remove\",\"id\":29,\"status\":1}],\"createTime\":1653359130000,\"param\":{},\"name\":\"岗位管理\",\"perms\":\"bnt.sysPost.list\",\"id\":22,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:19:23',NULL,0),(24,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysOperLog\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysOperLog/list\",\"sortValue\":0,\"component\":\"auth/sysOperLog/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysOperLog.list\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":30,\"isDeleted\":0,\"children\":[],\"createTime\":1653552617000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysOperLog.list\",\"id\":31,\"status\":1}],\"createTime\":1653552599000,\"param\":{},\"name\":\"操作日志\",\"perms\":\"bnt.sysOperLog.list\",\"id\":30,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:19:40',NULL,0),(25,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysLoginLog\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysLoginLog/list\",\"sortValue\":0,\"component\":\"auth/sysLoginLog/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysLoginLog.list\",\"select\":false,\"level\":4,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":32,\"isDeleted\":0,\"children\":[],\"createTime\":1653554191000,\"param\":{},\"name\":\"查看\",\"id\":33,\"status\":1}],\"createTime\":1653554173000,\"param\":{},\"name\":\"登录日志\",\"perms\":\" bnt.sysLoginLog.list\",\"id\":32,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:20:09',NULL,0),(26,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysUser\",\"select\":false,\"level\":2,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysUser\",\"sortValue\":1,\"component\":\"auth/sysUser/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysUser.list\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysUser.list\",\"id\":6,\"status\":1},{\"code\":\"bnt.sysUser.add\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysUser.add\",\"id\":7,\"status\":1},{\"code\":\"bnt.sysUser.update\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysUser.update\",\"id\":8,\"status\":1},{\"code\":\"bnt.sysUser.remove\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysUser.remove\",\"id\":9,\"status\":1},{\"code\":\"bnt.sysUser.assignRole\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":3,\"isDeleted\":0,\"children\":[],\"createTime\":1653297272000,\"param\":{},\"name\":\"分配角色\",\"perms\":\"bnt.sysUser.assignRole\",\"id\":18,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"用户管理\",\"perms\":\"bnt.sysUser.list\",\"id\":3,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:41:35',NULL,0),(27,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysRole\",\"select\":false,\"level\":2,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysRole\",\"sortValue\":0,\"component\":\"auth/sysRole/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysRole.list\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysRole.list\",\"id\":10,\"status\":1},{\"code\":\"bnt.sysRole.add\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysRole.add\",\"id\":11,\"status\":1},{\"code\":\"bnt.sysRole.update\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysRole.update\",\"id\":12,\"status\":1},{\"code\":\"bnt.sysRole.remove\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysRole.remove\",\"id\":13,\"status\":1},{\"code\":\"bnt.sysRole.assignAuth\",\"select\":false,\"level\":3,\"toCode\":\"assignAuth\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":4,\"isDeleted\":0,\"children\":[],\"createTime\":1653297494000,\"param\":{},\"name\":\"分配权限\",\"perms\":\"bnt.sysRole.assignAuth\",\"id\":19,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"角色管理\",\"perms\":\" bnt.sysRole.list\",\"id\":4,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:41:42',NULL,0),(28,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysMenu\",\"select\":false,\"level\":2,\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysMenu\",\"sortValue\":0,\"component\":\"auth/sysMenu/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysMenu.list\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysMenu.list\",\"id\":14,\"status\":1},{\"code\":\"bnt.sysMenu.add\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysMenu.add\",\"id\":15,\"status\":1},{\"code\":\"bnt.sysMenu.update\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysMenu.update\",\"id\":16,\"status\":1},{\"code\":\"bnt.sysMenu.remove\",\"select\":false,\"level\":3,\"updateTime\":1653959708000,\"type\":2,\"parentId\":5,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysMenu.remove\",\"id\":17,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"菜单管理\",\"perms\":\"bnt.sysMenu.list\",\"id\":5,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:41:51',NULL,0),(29,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysDept\",\"select\":false,\"level\":2,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysDept\",\"sortValue\":0,\"component\":\"auth/sysDept/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysDept.list\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653358064000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysDept.list\",\"id\":21,\"status\":1},{\"code\":\"bnt.sysDept.add\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463887000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysDept.add\",\"id\":24,\"status\":1},{\"code\":\"bnt.sysDept.update\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463901000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysDept.update\",\"id\":25,\"status\":1},{\"code\":\"bnt.sysDept.remove\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":20,\"isDeleted\":0,\"children\":[],\"createTime\":1653463919000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysDept.remove\",\"id\":26,\"status\":1}],\"createTime\":1653358025000,\"param\":{},\"name\":\"部门管理\",\"perms\":\"bnt.sysDept.list\",\"id\":20,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:41:58',NULL,0),(30,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysPost\",\"select\":false,\"level\":2,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysPost\",\"sortValue\":0,\"component\":\"auth/sysPost/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysPost.list\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653359145000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysPost.list\",\"id\":23,\"status\":1},{\"code\":\"bnt.sysPost.add\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463964000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysPost.add\",\"id\":27,\"status\":1},{\"code\":\"bnt.sysPost.update\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463978000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysPost.update\",\"id\":28,\"status\":1},{\"code\":\"bnt.sysPost.remove\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":22,\"isDeleted\":0,\"children\":[],\"createTime\":1653463991000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysPost.remove\",\"id\":29,\"status\":1}],\"createTime\":1653359130000,\"param\":{},\"name\":\"岗位管理\",\"perms\":\"bnt.sysPost.list\",\"id\":22,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:42:04',NULL,0),(31,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysOperLog\",\"select\":false,\"level\":2,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysOperLog\",\"sortValue\":0,\"component\":\"auth/sysOperLog/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysOperLog.list\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653959708000,\"type\":2,\"parentId\":30,\"isDeleted\":0,\"children\":[],\"createTime\":1653552617000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysOperLog.list\",\"id\":31,\"status\":1}],\"createTime\":1653552599000,\"param\":{},\"name\":\"操作日志\",\"perms\":\"bnt.sysOperLog.list\",\"id\":30,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:42:09',NULL,0),(32,'菜单管理','UPDATE','com.atguigu.auth.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/auth/sysMenu/update','127.0.0.1','{\"code\":\"sysLoginLog\",\"select\":false,\"level\":2,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":2,\"path\":\"sysLoginLog\",\"sortValue\":0,\"component\":\"auth/sysLoginLog/list\",\"isDeleted\":0,\"children\":[{\"code\":\"bnt.sysLoginLog.list\",\"select\":false,\"level\":3,\"toCode\":\"\",\"updateTime\":1653957062000,\"type\":1,\"parentId\":32,\"isDeleted\":0,\"children\":[],\"createTime\":1653554191000,\"param\":{},\"name\":\"查看\",\"id\":33,\"status\":1}],\"createTime\":1653554173000,\"param\":{},\"name\":\"登录日志\",\"perms\":\" bnt.sysLoginLog.list\",\"id\":32,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 09:42:15',NULL,0),(33,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"\",\"type\":0,\"parentId\":2,\"path\":\"log\",\"sortValue\":1,\"component\":\"\",\"param\":{},\"name\":\"日志管理\",\"perms\":\"\",\"id\":34,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 13:23:07',NULL,0),(34,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"visible\":1,\"icon\":\"\",\"type\":0,\"parentId\":0,\"path\":\"order\",\"sortValue\":1,\"component\":\"Layout\",\"param\":{},\"name\":\"订单管理\",\"perms\":\"\",\"id\":35,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 13:57:50',NULL,0),(35,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"visible\":1,\"icon\":\"\",\"type\":1,\"parentId\":35,\"path\":\"orderInfo\",\"sortValue\":1,\"component\":\"order/orderInfo/list\",\"param\":{},\"name\":\"订单列表\",\"perms\":\"bnt.orderInfo.list\",\"id\":36,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-05-31 13:58:37',NULL,0),(36,'岗位管理','INSERT','com.atguigu.system.controller.SysPostController.save()','POST','MANAGE','admin','','/admin/system/sysPost/save','127.0.0.1','{\"param\":{},\"name\":\"运营总监\",\"description\":\"\",\"postCode\":\"yyzj\",\"id\":8,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-08 17:14:21',NULL,0),(37,'角色管理','INSERT','com.atguigu.system.controller.SysRoleController.save()','POST','MANAGE','admin','','/admin/system/sysRole/save','127.0.0.1','{\"param\":{},\"roleCode\":\"\",\"roleName\":\"\",\"id\":8}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-08 17:39:04',NULL,0),(38,'角色管理','UPDATE','com.atguigu.system.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/system/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1654681144000,\"param\":{},\"roleCode\":\"\",\"roleName\":\"\",\"updateTime\":1654681144000,\"id\":8}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-08 17:39:08',NULL,0),(39,'角色管理','UPDATE','com.atguigu.system.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/system/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1654681144000,\"param\":{},\"roleCode\":\"\",\"roleName\":\"\",\"updateTime\":1654681144000,\"id\":8}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-08 17:39:41',NULL,0),(40,'角色管理','UPDATE','com.atguigu.system.controller.SysRoleController.updateById()','PUT','MANAGE','admin','','/admin/system/sysRole/update','127.0.0.1','{\"isDeleted\":0,\"createTime\":1654681144000,\"param\":{},\"roleCode\":\"yhgly\",\"roleName\":\"用户管理员\",\"updateTime\":1654681144000,\"id\":8}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-08 17:42:46',NULL,0),(41,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-phone\",\"type\":0,\"parentId\":0,\"path\":\"order\",\"sortValue\":1,\"component\":\"Layout\",\"param\":{},\"name\":\"订单管理\",\"perms\":\"\",\"id\":35,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:50:13',NULL,0),(42,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-phone\",\"updateTime\":1654735813000,\"type\":0,\"parentId\":0,\"path\":\"order\",\"sortValue\":1,\"component\":\"Layout\",\"isDeleted\":0,\"children\":[],\"createTime\":1654735813000,\"param\":{},\"name\":\"订单管理\",\"perms\":\"\",\"id\":35,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:50:22',NULL,0),(43,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-help\",\"type\":1,\"parentId\":35,\"path\":\"orderInfo\",\"sortValue\":1,\"component\":\"order/orderInfo/list\",\"param\":{},\"name\":\"订单列表\",\"perms\":\"bnt.orderInfo.list\",\"id\":36,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:51:22',NULL,0),(44,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"\",\"type\":2,\"parentId\":36,\"path\":\"\",\"sortValue\":1,\"component\":\"\",\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.add\",\"id\":37,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:52:37',NULL,0),(45,'菜单管理','DELETE','com.atguigu.system.controller.SysMenuController.remove()','DELETE','MANAGE','admin','','/admin/system/sysMenu/remove/37','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:53:01',NULL,0),(46,'菜单管理','DELETE','com.atguigu.system.controller.SysMenuController.remove()','DELETE','MANAGE','admin','','/admin/system/sysMenu/remove/36','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:53:04',NULL,0),(47,'菜单管理','DELETE','com.atguigu.system.controller.SysMenuController.remove()','DELETE','MANAGE','admin','','/admin/system/sysMenu/remove/35','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 08:53:06',NULL,0),(48,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-custom\",\"updateTime\":1654737767000,\"type\":1,\"parentId\":2,\"path\":\"sysUser\",\"sortValue\":1,\"component\":\"system/sysUser/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":3,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysUser.list\",\"id\":6,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":3,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysUser.add\",\"id\":7,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":3,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysUser.update\",\"id\":8,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":3,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysUser.remove\",\"id\":9,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":3,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653297272000,\"param\":{},\"name\":\"分配角色\",\"perms\":\"bnt.sysUser.assignRole\",\"id\":18,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"用户管理\",\"perms\":\"\",\"id\":3,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:01',NULL,0),(49,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-user-solid\",\"updateTime\":1654737768000,\"type\":1,\"parentId\":2,\"path\":\"sysRole\",\"sortValue\":1,\"component\":\"system/sysRole/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysRole.list\",\"id\":10,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysRole.add\",\"id\":11,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysRole.update\",\"id\":12,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysRole.remove\",\"id\":13,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"path\":\"\",\"sortValue\":1,\"component\":\"\",\"isDeleted\":0,\"children\":[],\"createTime\":1653297494000,\"param\":{},\"name\":\"分配权限\",\"perms\":\"bnt.sysRole.assignAuth\",\"id\":19,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"角色管理\",\"perms\":\"\",\"id\":4,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:10',NULL,0),(50,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-unfold\",\"updateTime\":1654737769000,\"type\":1,\"parentId\":2,\"path\":\"sysMenu\",\"sortValue\":1,\"component\":\"system/sysMenu/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":5,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysMenu.list\",\"id\":14,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":5,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysMenu.add\",\"id\":15,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":5,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysMenu.update\",\"id\":16,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":5,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1622455537000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysMenu.remove\",\"id\":17,\"status\":1}],\"createTime\":1622455537000,\"param\":{},\"name\":\"菜单管理\",\"perms\":\"\",\"id\":5,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:21',NULL,0),(51,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-operation\",\"updateTime\":1654737776000,\"type\":1,\"parentId\":2,\"path\":\"sysDept\",\"sortValue\":1,\"component\":\"system/sysDept/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":20,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653358064000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysDept.list\",\"id\":21,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":20,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463887000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysDept.add\",\"id\":24,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":20,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463901000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysDept.update\",\"id\":25,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":20,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463919000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysDept.remove\",\"id\":26,\"status\":1}],\"createTime\":1653358025000,\"param\":{},\"name\":\"部门管理\",\"perms\":\"\",\"id\":20,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:28',NULL,0),(52,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-more-outline\",\"updateTime\":1654737777000,\"type\":1,\"parentId\":2,\"path\":\"sysPost\",\"sortValue\":1,\"component\":\"system/sysPost/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":22,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653359145000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysPost.list\",\"id\":23,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":22,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463964000,\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.sysPost.add\",\"id\":27,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":22,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463978000,\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.sysPost.update\",\"id\":28,\"status\":1},{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":22,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653463991000,\"param\":{},\"name\":\"删除\",\"perms\":\"bnt.sysPost.remove\",\"id\":29,\"status\":1}],\"createTime\":1653359130000,\"param\":{},\"name\":\"岗位管理\",\"perms\":\"\",\"id\":22,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:35',NULL,0),(53,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-tickets\",\"updateTime\":1653974966000,\"type\":0,\"parentId\":2,\"path\":\"log\",\"sortValue\":1,\"component\":\"ParentView\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737785000,\"type\":1,\"parentId\":34,\"path\":\"sysOperLog\",\"sortValue\":1,\"component\":\"system/sysOperLog/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":30,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653552617000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysOperLog.list\",\"id\":31,\"status\":1}],\"createTime\":1653552599000,\"param\":{},\"name\":\"操作日志\",\"perms\":\"\",\"id\":30,\"status\":1},{\"select\":false,\"updateTime\":1654737787000,\"type\":1,\"parentId\":34,\"path\":\"sysLoginLog\",\"sortValue\":1,\"component\":\"system/sysLoginLog/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":32,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653554191000,\"param\":{},\"name\":\"查看\",\"id\":33,\"status\":1}],\"createTime\":1653554173000,\"param\":{},\"name\":\"登录日志\",\"perms\":\"\",\"id\":32,\"status\":1}],\"createTime\":1653974587000,\"param\":{},\"name\":\"日志管理\",\"perms\":\"\",\"id\":34,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:46',NULL,0),(54,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-document-remove\",\"updateTime\":1654737785000,\"type\":1,\"parentId\":34,\"path\":\"sysOperLog\",\"sortValue\":1,\"component\":\"system/sysOperLog/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":30,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653552617000,\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.sysOperLog.list\",\"id\":31,\"status\":1}],\"createTime\":1653552599000,\"param\":{},\"name\":\"操作日志\",\"perms\":\"\",\"id\":30,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:24:55',NULL,0),(55,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-goods\",\"updateTime\":1654737787000,\"type\":1,\"parentId\":34,\"path\":\"sysLoginLog\",\"sortValue\":1,\"component\":\"system/sysLoginLog/list\",\"isDeleted\":0,\"children\":[{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":32,\"sortValue\":1,\"isDeleted\":0,\"children\":[],\"createTime\":1653554191000,\"param\":{},\"name\":\"查看\",\"id\":33,\"status\":1}],\"createTime\":1653554173000,\"param\":{},\"name\":\"登录日志\",\"perms\":\"\",\"id\":32,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:25:07',NULL,0),(56,'用户管理','DELETE','com.atguigu.system.controller.SysUserController.remove()','DELETE','MANAGE','admin','','/admin/system/sysUser/remove/4','127.0.0.1','','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:25:21',NULL,0),(57,'菜单管理','UPDATE','com.atguigu.system.controller.SysMenuController.updateById()','PUT','MANAGE','admin','','/admin/system/sysMenu/update','127.0.0.1','{\"select\":false,\"updateTime\":1654737758000,\"type\":2,\"parentId\":4,\"path\":\"assignAuth\",\"sortValue\":1,\"component\":\"system/sysRole/assignAuth\",\"isDeleted\":0,\"children\":[],\"createTime\":1653297494000,\"param\":{},\"name\":\"分配权限\",\"perms\":\"bnt.sysRole.assignAuth\",\"id\":19,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:26:07',NULL,0),(58,'角色管理','ASSGIN','com.atguigu.system.controller.SysMenuController.doAssign()','POST','MANAGE','admin','','/admin/system/sysMenu/doAssign','127.0.0.1','{\"roleId\":2,\"menuIdList\":[2,3,6,7,8,5,14,20,21]}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-09 09:26:34',NULL,0),(59,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-s-help\",\"type\":0,\"parentId\":0,\"path\":\"vod\",\"sortValue\":1,\"component\":\"Layout\",\"param\":{},\"name\":\"点播管理\",\"perms\":\"\",\"id\":35,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-10 15:26:53',NULL,0),(60,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"el-icon-phone\",\"type\":1,\"parentId\":35,\"path\":\"teacher/list\",\"sortValue\":1,\"component\":\"vod/teacher/list\",\"param\":{},\"name\":\"讲师列表\",\"perms\":\"\",\"id\":36,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-10 15:27:38',NULL,0),(61,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"\",\"type\":2,\"parentId\":36,\"path\":\"teacher/create\",\"sortValue\":1,\"component\":\"vod/teacher/form\",\"param\":{},\"name\":\"添加\",\"perms\":\"bnt.teacher.add\",\"id\":37,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-10 15:28:27',NULL,0),(62,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"\",\"type\":2,\"parentId\":36,\"path\":\"teacher/edit/:id\",\"sortValue\":1,\"component\":\"vod/teacher/form\",\"param\":{},\"name\":\"修改\",\"perms\":\"bnt.teacher.update\",\"id\":38,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-10 15:29:13',NULL,0),(63,'菜单管理','INSERT','com.atguigu.system.controller.SysMenuController.save()','POST','MANAGE','admin','','/admin/system/sysMenu/save','127.0.0.1','{\"select\":false,\"icon\":\"\",\"type\":2,\"parentId\":36,\"path\":\"\",\"sortValue\":1,\"component\":\"\",\"param\":{},\"name\":\"查看\",\"perms\":\"bnt.teacher.list\",\"id\":39,\"status\":1}','{\"code\":200,\"message\":\"成功\"}',1,'',NULL,'2022-06-10 15:35:30',NULL,0);

#
# Structure for table "sys_post"
#

CREATE TABLE `sys_post` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '岗位ID',
  `post_code` varchar(64) NOT NULL COMMENT '岗位编码',
  `name` varchar(50) NOT NULL DEFAULT '' COMMENT '岗位名称',
  `description` varchar(255) NOT NULL DEFAULT '' COMMENT '描述',
  `status` tinyint(1) NOT NULL DEFAULT '1' COMMENT '状态（1正常 0停用）',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `update_time` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COMMENT='岗位信息表';

#
# Data for table "sys_post"
#

INSERT INTO `sys_post` VALUES (5,'dsz','董事长','1',1,'2022-05-24 10:33:53',NULL,0),(6,'zjl','总经理','2',1,'2022-05-24 10:34:08',NULL,0),(7,'wz','网咨','',1,'2022-05-27 08:56:41','2022-05-27 08:56:41',1),(8,'yyzj','运营总监','',1,'2022-06-08 17:14:21',NULL,0);

#
# Structure for table "sys_role"
#

CREATE TABLE `sys_role` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '角色id',
  `role_name` varchar(20) NOT NULL DEFAULT '' COMMENT '角色名称',
  `role_code` varchar(20) DEFAULT NULL COMMENT '角色编码',
  `description` varchar(255) DEFAULT NULL COMMENT '描述',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COMMENT='角色';

#
# Data for table "sys_role"
#

INSERT INTO `sys_role` VALUES (1,'系统管理员','SYSTEM','系统管理员','2021-05-31 18:09:18','2022-06-08 09:21:10',0),(2,'普通管理员','COMMON','普通管理员','2021-06-01 08:38:40','2022-02-24 10:42:46',0),(8,'用户管理员','yhgly',NULL,'2022-06-08 17:39:04','2022-06-08 17:39:04',0);

#
# Structure for table "sys_role_menu"
#

CREATE TABLE `sys_role_menu` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `role_id` bigint(20) NOT NULL DEFAULT '0',
  `menu_id` bigint(11) NOT NULL DEFAULT '0',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`),
  KEY `idx_role_id` (`role_id`),
  KEY `idx_menu_id` (`menu_id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8 COMMENT='角色菜单';

#
# Data for table "sys_role_menu"
#

INSERT INTO `sys_role_menu` VALUES (1,2,2,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(2,2,3,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(3,2,6,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(4,2,7,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(5,2,8,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(6,2,9,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(7,2,18,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(8,2,4,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(9,2,10,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(10,2,11,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(11,2,12,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(12,2,13,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(13,2,19,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(14,2,5,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(15,2,14,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(16,2,15,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(17,2,16,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(18,2,17,'2022-06-02 16:11:27','2022-06-02 16:16:10',1),(19,2,2,'2022-06-02 16:16:10','2022-06-09 09:26:34',1),(20,2,3,'2022-06-02 16:16:10','2022-06-09 09:26:34',1),(21,2,6,'2022-06-02 16:16:10','2022-06-09 09:26:34',1),(22,2,7,'2022-06-02 16:16:10','2022-06-09 09:26:34',1),(23,2,8,'2022-06-02 16:16:10','2022-06-09 09:26:34',1),(24,2,2,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(25,2,3,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(26,2,6,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(27,2,7,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(28,2,8,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(29,2,5,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(30,2,14,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(31,2,20,'2022-06-09 09:26:34','2022-06-09 09:26:34',0),(32,2,21,'2022-06-09 09:26:34','2022-06-09 09:26:34',0);

#
# Structure for table "sys_user"
#

CREATE TABLE `sys_user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '会员id',
  `username` varchar(20) NOT NULL DEFAULT '' COMMENT '用户名',
  `password` varchar(32) NOT NULL DEFAULT '' COMMENT '密码',
  `name` varchar(50) DEFAULT NULL COMMENT '姓名',
  `phone` varchar(11) DEFAULT NULL COMMENT '手机',
  `head_url` varchar(200) DEFAULT NULL COMMENT '头像地址',
  `dept_id` bigint(20) DEFAULT NULL COMMENT '部门id',
  `post_id` bigint(20) DEFAULT NULL COMMENT '岗位id',
  `description` varchar(255) DEFAULT NULL COMMENT '描述',
  `status` tinyint(3) DEFAULT NULL COMMENT '状态（1：正常 0：停用）',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COMMENT='用户表';

#
# Data for table "sys_user"
#

INSERT INTO `sys_user` VALUES (1,'admin','96e79218965eb72c92a549dd5a330112','admin','15099909888','http://r61cnlsfq.hn-bkt.clouddn.com/7daa4595-dfde-45da-8513-c5c2b81d20cc',1021,5,NULL,1,'2021-05-31 18:08:43','2022-05-25 11:34:25',0),(2,'wangqq','96e79218965eb72c92a549dd5a330112','王倩倩','15010546381','http://r61cnlsfq.hn-bkt.clouddn.com/b09b3467-3d99-437a-bd2e-dd8c9be92bb8',1022,6,NULL,1,'2022-02-08 10:35:38','2022-05-25 15:58:31',0),(3,'wanggang','96e79218965eb72c92a549dd5a330112','王刚','18909098909',NULL,1024,5,NULL,0,'2022-05-24 11:05:40','2022-06-02 10:19:25',0);

#
# Structure for table "sys_user_role"
#

CREATE TABLE `sys_user_role` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键id',
  `role_id` bigint(20) NOT NULL DEFAULT '0' COMMENT '角色id',
  `user_id` bigint(20) NOT NULL DEFAULT '0' COMMENT '用户id',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `is_deleted` tinyint(3) NOT NULL DEFAULT '0' COMMENT '删除标记（0:可用 1:已删除）',
  PRIMARY KEY (`id`),
  KEY `idx_role_id` (`role_id`),
  KEY `idx_admin_id` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 COMMENT='用户角色';

#
# Data for table "sys_user_role"
#

INSERT INTO `sys_user_role` VALUES (2,2,2,'2022-01-20 20:49:37','2022-02-24 10:43:07',0),(3,1,1,'2022-05-19 10:37:27','2022-05-24 16:55:53',1),(4,2,1,'2022-05-19 10:37:27','2022-05-24 16:55:53',1),(5,1,1,'2022-05-24 16:55:53','2022-05-24 16:55:53',0),(6,2,3,'2022-05-25 16:09:31','2022-05-25 16:09:31',0),(7,2,4,'2022-06-02 11:08:14','2022-06-02 11:15:36',1),(8,2,4,'2022-06-02 11:15:36','2022-06-02 16:10:53',1),(9,1,4,'2022-06-02 11:15:36','2022-06-02 16:10:53',1),(10,1,4,'2022-06-02 16:10:53','2022-06-02 16:10:53',0);
```

## 搭建环境

### 搭建后端环境

#### Maven聚合工程

如图
![02-搭建后端环境（maven聚合）](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/02-搭建后端环境（maven聚合）.png)
说实话我只知道怎么用这个maven,但是这个聚合我还是真不明白
看着来吧

创建出的内容:
![20230119131008](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230119131008.png)

## MyBatis-plus

#### 配置使用

没想到这里竟然还会讲一下MyBatis-plus

1. 准备:
   - SpringBoot配置文件
   - 启动类
   - 实体类
2. 创建Mapper
   - mp实现crud操作
3. 创建service
   - mp实现crud操作

记笔记都不知道怎么记了
害

零散着记吧

> SysRoleMapper.java
> Mapper接口,这里使用了@Repository注解,**来表示这个类具有对对象的CRUD的功能**

```java
package com.zzmr.system.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.zzmr.model.system.SysRole;
import org.springframework.stereotype.Repository;

@Repository
public interface SysRoleMapper extends BaseMapper<SysRole> {
}
```

然后写一个测试方法试一下:

```java
    @Test
    @DisplayName("查询表中所有记录")
    public void findAll() {
        List<SysRole> list = sysRoleMapper.selectList(null);
        list.forEach(System.out::println);
    }
```

没什么问题,跟之前的用法大致一样

#### 知识点

> **主键策略**
> ![20230119151348](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230119151348.png)

1. AUTO--自动增长
2. INPUT--自己设置主键值
3. NONE--不使用策略
4. ASSIGN_ID--默认值,生成一个19位的数字,唯一
5. ASSIGN_UUID--生成uuid

> **删除**

分为物理删除和逻辑删除

物理删除:表中的数据真正的删除了
逻辑删除:表数据还存在,但是这个数据查询不出来了

- 添加逻辑删除标志为,判断
  - 约定0:没有删除,1:已经删除
    通过修改标志位,进行逻辑删除(本质上就是修改操作,好处就是如果删除错了,可以很快的恢复)

怎么实现呢?

1. 表中要有一个字段,比如is_deleted,数值0/1
2. 实体类中要有一个属性:

```java
    @TableLogic  //逻辑删除 默认效果 0 没有删除 1 已经删除
    @TableField("is_deleted")
    private Integer isDeleted;
```

逻辑删除方法,和普通的没什么区别,只是由于上面 ``@TableLogic``注解的限制,所以这里使用了逻辑删除

```java
    @Test
    @DisplayName("删除操作-根据id删除")
    public void deleteById(){
        // 返回的依然是影响行数
        int rows = sysRoleMapper.deleteById(9);
    }
```

怎么实现的呢?
看底层的sql语句:

```sql
SELECT id,role_name,role_code,description,create_time,update_time,is_deleted FROM sys_role WHERE is_deleted=0
```

可以看出,再最后加了一个is_deleted=0,也就是说,只有为0的数据才能被查到

> **批量删除**

```java
    @Test
    @DisplayName("批量删除")
    public void testBatchDelete(){
        // 返回的依然是影响行数
        int rows = sysRoleMapper.deleteBatchIds(Arrays.asList(9,10,11));
    }
```

> 注意,如果把上面的 ``@TableLogic``注解去掉,那就变成了物理删除

> **条件构造器**

MyBatis-plus条件构造器

实现条件查询

```java
    @Test
    @DisplayName("条件查询")
    public void testSelect(){
        // 创建一个条件构造器对象
        QueryWrapper<SysRole> wrapper = new QueryWrapper<>();
        // 设置条件  column字段名称，val是值
        //wrapper.eq("role_name","用户管理员");
        wrapper.like("role_name","管理员");
        // 调用方法查询
        List<SysRole> list = sysRoleMapper.selectList(wrapper);
        list.forEach(System.out::println);
    }
```

实现条件删除

```java
    @Test
    @DisplayName("条件删除")
    public void testDelete(){
        // 创建一个条件构造器对象
        QueryWrapper<SysRole> wrapper = new QueryWrapper<>();
        // 设置条件  column字段名称，val是值
        //wrapper.eq("role_name","用户管理员");
        wrapper.like("role_name","1");
        // 调用方法删除
        sysRoleMapper.delete(wrapper);
    }
```

#### Service中使用mp

1. 创建Service接口,继承IService(哈哈哈之前boot里讲过一点这个)
2. 创建Service实现类,继承ServiceImpl

> SysRoleService.java

```java
package com.zzmr.system.service;

import com.baomidou.mybatisplus.extension.service.IService;
import com.zzmr.model.system.SysRole;

public interface SysRoleService extends IService<SysRole> {
}
```

> SysRoleServiceImpl.java

```java
package com.zzmr.system.service.impl;

import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.zzmr.model.system.SysRole;
import com.zzmr.system.mapper.SysRoleMapper;
import com.zzmr.system.service.SysRoleService;
import org.springframework.stereotype.Service;

@Service
public class SysRoleServiceImpl extends ServiceImpl<SysRoleMapper, SysRole> implements SysRoleService {
}
```

然后测试:

```java
package com.zzmr.system.test;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.zzmr.model.system.SysRole;
import com.zzmr.system.service.SysRoleService;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import java.util.List;

@SpringBootTest
public class SysRoleServiceTest {

    @Autowired
    private SysRoleService sysRoleService;

    @Test
    @DisplayName("查询表中所有所有记录")
    public void findAll() {
        List<SysRole> list = sysRoleService.list();
        list.forEach(System.out::println);
    }

    @Test
    @DisplayName("添加数据")
    public void add(){
        SysRole sysRole = new SysRole();
        sysRole.setRoleName("Jimmy");
        sysRole.setRoleCode("admin");
        sysRole.setDescription("管理员");
        sysRoleService.save(sysRole);
    }

    @Test
    @DisplayName("修改数据")
    public void update(){
        SysRole sysRole = sysRoleService.getById(13);
        sysRole.setRoleName("灼灼某人");
        sysRoleService.updateById(sysRole);
    }

    @Test
    @DisplayName("删除数据")
    public void delete(){
        sysRoleService.removeById(14);
    }

    @Test
    @DisplayName("条件查询")
    public void select(){
        QueryWrapper<SysRole> wrapper = new QueryWrapper<>();
        wrapper.eq("role_code","SYSTEM");
        List<SysRole> list = sysRoleService.list(wrapper);
        list.forEach(System.out::println);
    }

}
```

## 角色管理模块-后端接口

开始编写controller,之前一直不知道开发接口是什么意思,现在明白了
**编写Controller,service,mapper实现具体功能,就是开发接口**

而前后端分离
![09-前后端分离开发](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/09-前后端分离开发.png)

### 测试controller层

> 查询所有的记录

```java
package com.zzmr.system.controller;

import com.zzmr.model.system.SysRole;
import com.zzmr.system.service.SysRoleService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
@RequestMapping("/admin/system/sysRole")
public class SysRoleController {

    @Autowired
    private SysRoleService sysRoleService;

    // 查询所有的记录
    @GetMapping("findAll")
    public List<SysRole> findAllRole() {
        //    调用Service
        List<SysRole> list = sysRoleService.list();
        return list;
    }

}
```

> 逻辑删除接口

```java
    // 逻辑删除接口
    @DeleteMapping("remove/{id}")
    public boolean removeRole(@PathVariable Long id) {
        boolean result = sysRoleService.removeById(id);
        return result;
    }
```

### 整合Swagger2

前后端分离开发中,api文档是最好的沟通方式

Swagger是一个规范和完整的框架,用于生成,描述,调用和可视化RESTful风格的web服务

**集成knife4j**

1. 引入依赖:

```xml
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
</dependency>
```

2. 配置类:

```java
package com.zzmr.system.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.ParameterBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.schema.ModelRef;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.service.Contact;
import springfox.documentation.service.Parameter;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

import java.util.ArrayList;
import java.util.List;

@Configuration
@EnableSwagger2
public class Knife4jConfig {
    @Bean
    public Docket adminApiConfig() {
        List<Parameter> pars = new ArrayList<>();
        ParameterBuilder tokenPar = new ParameterBuilder();
        tokenPar.name("token")
                .description("用户token")
                .defaultValue("")
                .modelRef(new ModelRef("string"))
                .parameterType("header")
                .required(false)
                .build();
        pars.add(tokenPar.build());
        //添加head参数end

        Docket adminApi = new Docket(DocumentationType.SWAGGER_2)
                .groupName("adminApi")
                .apiInfo(adminApiInfo())
                .select()
                //只显示admin路径下的页面
                .apis(RequestHandlerSelectors.basePackage("com.atguigu"))
                .paths(PathSelectors.regex("/admin/.*"))
                .build()
                .globalOperationParameters(pars);
        return adminApi;
    }

    private ApiInfo adminApiInfo() {

        return new ApiInfoBuilder()
                .title("后台管理系统-API文档")
                .description("本文档描述了后台管理系统微服务接口定义")
                .version("1.0")
                .contact(new Contact("atguigu", "http://atguigu.com", "atguigu@qq.com"))
                .build();
    }
}
```

3. 使用,修改controller

```java
// 给类上添加
@Api(tags = "角色管理接口")

// 给方法上添加
@ApiOperation("查询所有的记录")
```

然后访问http://localhost:8800/doc.html即可
如果报错:``Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerException``,则可能是springboot的版本与swapper的版本不适配,修改版本或者加上配置项:

```yml
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher  # 未知原因，swapper2报错，加上这个配置项就好了
```

如图:
![20230119211121](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230119211121.png)

### 定义统一返回结果对象

项目中我们会将响应封装成json返回,一般我们会将接口的数据格式统一

> 列表:

```json
{
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 2,
      "roleName": "系统管理员"
    }
  ],
  "ok": true
}
```

> 分页:

```json
{
  "code": 200,
  "message": "成功",
  "data": {
    "records": [
      {
        "id": 2,
        "roleName": "系统管理员"
      },
      {
        "id": 3,
        "name": "普通管理员"
      }
    ],
    "total": 10,
    "size": 3,
    "current": 1,
    "orders": [],
    "hitCount": false,
    "searchCount": true,
    "pages": 2
  },
  "ok": true
}
```

> 没有返回数据

```json
{
  "code": 200,
  "message": "成功",
  "data": null,
  "ok": true
}
```

> 失败

```json
{
  "code": 201,
  "message": "失败",
  "data": null,
  "ok": false
}
```

涉及到知识盲区了
创建了两个类
然后又要改controller

```java
// 查询所有的记录
    @ApiOperation("查询所有的记录")
    @GetMapping("findAll")
    public Result findAllRole() {
        //    调用Service
        List<SysRole> list = sysRoleService.list();
        return Result.ok(list);
    }

    // 逻辑删除接口
    @ApiOperation("逻辑删除接口")
    @DeleteMapping("remove/{id}")
    public Result removeRole(@PathVariable Long id) {
        boolean result = sysRoleService.removeById(id);
        if (result) {
            return Result.ok();
        } else {
            return Result.fail();
        }
    }
```

### 条件分页查询

1. 配置分页插件,通过配置类实现

```java
package com.zzmr.system.config;

import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class MyBatisPlusConfig {
    /**
     * 插件
     * @return
     */
    @Bean
    public MybatisPlusInterceptor addPaginationInnerInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        //向Mybatis过滤器链中添加分页拦截器
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        return interceptor;
    }
}
```

2. 创建controller方法,创建service方法,创建mapper方法
3. 创建mapper的xml配置文件,编写sql语句实现

### 添加角色

```java
    //    添加
    //    @RequestBody 不能使用get提交方式，传递来的是json格式的数据，把json格式数据封装到对象里面
    @ApiOperation("添加操作")
    @PostMapping("save")
    public Result saveRole(@RequestBody SysRole sysRole) {
        boolean isSuccess = sysRoleService.save(sysRole);
        if (isSuccess) {
            return Result.ok();
        } else {
            return Result.fail();
        }
    }
```

### 修改操作

```java
// 修改-根据id查询
    @ApiOperation("根据id查询")
    @GetMapping("findRoleById/{id}")
    public Result findRoleById(@PathVariable Long id) {
        SysRole sysRole = sysRoleService.getById(id);
        return Result.ok(sysRole);
    }

    // 修改-最终修改
    @ApiOperation("最终修改")
    @PutMapping("update")
    public Result updateRole(@RequestBody SysRole sysRole) {
        boolean isSuccess = sysRoleService.updateById(sysRole);
        if (isSuccess) {
            return Result.ok();
        } else {
            return Result.fail();
        }
    }
```

### 批量删除

```java
    //    批量删除
    //    得到多个id值
    @ApiOperation("批量删除")
    @DeleteMapping("batchRemove")
    public Result batchRemove(@RequestBody List<Long> ids) {
        boolean isSuccess = sysRoleService.removeByIds(ids);
        return judgeSuccess(isSuccess);
    }

    // 封装一个用来return的方法,不用每次都写if.else了,直接调用方法
    private static Result judgeSuccess(Boolean isSuccess) {
        if (isSuccess) {
            return Result.ok();
        } else {
            return Result.fail();
        }
    }
```

顺便封装了一下isSuccess

### 统一异常处理

1. 全局异常处理
2. 特定异常处理
3. 自定义异常处理

> **全局异常处理**,处理所有异常

```java
package com.zzmr.system.exception;

import com.zzmr.common.result.Result;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseBody;

@ControllerAdvice
public class GlobalExceptionHandler {

    //    全局异常处理
    @ExceptionHandler(Exception.class)
    @ResponseBody
    public Result error(Exception e) {
        return Result.fail().message("执行了全局异常处理");
    }
}
```

> **特定异常处理**

```java
    //    特定异常处理
    @ExceptionHandler(ArithmeticException.class)
    @ResponseBody
    public Result error(ArithmeticException e) {
        System.out.println("特定");
        e.printStackTrace();
        return Result.fail().message("执行了特定异常处理,处理" + e);
    }
```

**这里要注意,如果同时设置了全局和特定,当触发异常时,会先去找有没有特定的,没有才会去找全局异常处理**

> **自定义异常处理**

首先自定义一个异常处理类

```java
package com.zzmr.system.exception;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class ZZMRException extends RuntimeException{ // 继承运行时异常

    private Integer code;

    private String msg;
  
}
```

然后再写一个异常处理方法

```java
    //    自定义异常处理
    @ExceptionHandler(ZZMRException.class)
    @ResponseBody
    public Result error(ZZMRException e) {
        System.out.println("特定");
        e.printStackTrace();
        return Result.fail().code(e.getCode()).message(e.getMsg());
    }
```

因为是自定义的,所以需要自己手动抛出

```java
// 查询所有的记录
    @ApiOperation("查询所有的记录")
    @GetMapping("findAll")
    public Result findAllRole() {
        //TODO 模拟异常效果  ArithmeticException

        try {
            int i = 9 / 0;
        } catch (Exception e) {
            throw new ZZMRException(20001, "执行了自定义异常处理");
        }

        //    调用Service
        List<SysRole> list = sysRoleService.list();
        return Result.ok(list);
    }
```

## 角色管理模块-前端部分

> 现在终于知道前端工程师的英文是什么了:Front-End-Developer

### Node.js

之前也没有系统学过这个东西
看这老师能讲成什么样吧

Node.js-JavaScript运行环境,还可以作为服务器使用

原来还可以这么用,直接 ``node xxx.js``就可以运行这个js文件

当服务器用:

```js
const http = require('http')
http.createServer(function (request, response) {
    // 发送 HTTP 头部 
    // HTTP 状态值: 200 : OK
    // 内容类型: text/plain
    response.writeHead(200, {'Content-Type': 'text/plain'})
    // 发送响应数据 "Hello World"
    response.end('Hello Server')
}).listen(8888)
// 终端打印如下信息
console.log('Server running at http://127.0.0.1:8888/')
```

### Npm

什么是npm?
npm全称node package manager,是node.js包管理工具

初始化项目:``npm init``
如果一切都使用默认值:``npm init -y``

管理前端依赖

设置镜像(之前设置过了)

```
#经过下面的配置，以后所有的 npm install 都会经过淘宝的镜像地址下载
npm config set registry https://registry.npm.taobao.org 
#查看npm配置信息
npm config list
```

下载依赖就是 ``npm install xxx``,之前学vue的时候也是用到很多了

如果项目中有配置文件,但是没有依赖(node_modules),执行 ``npm install``会自动下载所需要的依赖

> **ES5和ES6**
> 我现在终于明白了这个东西

ES5的暴露:

```js
// 设置哪些方法可以被其他js文件调用
module.exports = { sum, sub }
```

ES5的导入

```js
// 引入要调用方法所在的js文件
var m = require('./01.js')

var result = m.sum(1,3);

console.log(result)
```

> 算是终于明白了

> **ES6**
> 还是ES6比较重要吧

模块化开发就是ES6带来的

ES6的暴露就是直接export...

导入就是import...from...

但是**ES6的模块化无法在Node.js中执行,需要用Babel编辑成ES5再执行**

1. 首先在根目录创建一个文件 ``babelrc``
2. 执行 ``npm install --save-dev babel-preset-es2015``安装

然后还要执行 ``babel es6 -d es5``
好麻烦哦,还是vue配好的舒服

到后面会用到vue,所以这里就听一下就好了,过一遍


### 搭建前端环境

vue-element-admin,这个框架看起来很牛的样子

它的精简版:[vue-admin-template](https://github.com/PanJiaChen/vue-admin-template)


直接下载最新版?
然后得到:
![20230120133635](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230120133635.png)

因为它的package.json中有依赖信息,所以可以直接下载

下载完直接运行```npm run dev```

>[可爱的小兔子](https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/80/h/80)

然后打开http://localhost:9528/
就有页面了

在src中
![20230120140811](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230120140811.png)


#### 改造登陆功能

1. 在本地根据框架请求创建两个接口,返回相同的数据
    - login
    - info

后端部分改造:
>添加新的controller
```java
package com.zzmr.system.controller;

import com.zzmr.common.result.Result;
import io.swagger.annotations.Api;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.HashMap;
import java.util.Map;

@Api(tags = "用户登陆的接口")
@RestController
@RequestMapping("/admin/system/index")
public class IndexController {

    //    login
    //{"code":20000,"data":{"token":"admin-token"}}
    @PostMapping("login")
    public Result login() {
        Map<String, Object> map = new HashMap<>();
        map.put("token", "admin-token");
        return Result.ok(map);
    }

    //    info
    //    {"code":20000,"data":
    //    {"roles":["admin"],
    //    "introduction":"I am a super administrator",
    //    "avatar":"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",
    //    "name":"Super Admin"}}
    @GetMapping("info")
    public Result info() {
        Map<String, Object> map = new HashMap<>();
        map.put("roles", "[admin]");
        map.put("introduction", "I am a super administrator");
        map.put("avatar", "https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif");
        map.put("name", "Super Admin");
        return Result.ok(map);
    }
}
```


前端部分改造:

1. 修改vue.config.js
```js
proxy: {
  '/dev-api': { // 匹配所有以 '/dev-api'开头的请求路径
    target: 'http://localhost:8800',
    changeOrigin: true, // 支持跨域
    pathRewrite: { // 重写路径: 去掉路径中开头的'/dev-api'
      '^/dev-api': ''
    }
  }
}
```

2. 修改utils里面的request.js文件
成功状态码改为200(后端是200)
![20230120144456](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230120144456.png)

3. 修改登录接口路径和提交方式
修改user.js
```js
export function login(data) {
  return request({
    url: '/admin/system/index/login',
    method: 'post',
    data
  })
}
```
其实就是把url改一下

然后修改一下退出方法
```js
  // user logout
  logout({ commit, state }) {
    return new Promise((resolve, reject) => {
      // logout(state.token).then(() => {
        removeToken() // must remove  token  first
        resetRouter()
        commit('RESET_STATE')
        resolve()
      // }).catch(error => {
      //   reject(error)
      // })
    })
  },
```

#### 角色列表(路由和页面)

1. 添加角色管理路由
2. 创建路由对应页面
3. 在api目录创建js文件,定义角色管理接口
4. 具体功能页面调用api定义的方法获取接口返回数据
5. 把接口返回的数据进行处理,使用Element-ui显示


>添加路由
```js
{
    path: '/system',
    component: Layout,
    redirect: '/system/sysUser',
    name: 'system',
    meta: { title: '系统管理', icon: 'el-icon-s-help' },
    children: [
      {
        path: 'sysRole',
        name: 'sysRole',
        component: () => import('@/views/system/sysRole/list'),
        meta: { title: '角色管理', icon: 'table' }
      },
      {
        path: 'sysUser',
        name: 'sysUser',
        component: () => import('@/views/system/sysUser/list'),
        meta: { title: '用户管理', icon: 'tree' }
      }
    ]
  },
```

#### 分页组件

那这个分页也太强了
根本没干什么,就写完了
```js
  <!-- 分页组件 -->
  <el-pagination
    :current-page="page"
    :total="total"
    :page-size="limit"
    style="padding: 30px 0; text-align: center;"
    layout="total, prev, pager, next, jumper"
    @current-change="fetchData"
  />
```


#### 条件查询

```js
<!--查询表单-->
<div class="search-div">
      <el-form label-width="70px" size="small">
        <el-row>
          <el-col :span="24">
            <el-form-item label="角色名称">
              <el-input style="width: 100%" v-model="searchObj.roleName" placeholder="角色名称"></el-input>
            </el-form-item>
          </el-col>
        </el-row>
        <el-row style="display:flex">
          <el-button type="primary" icon="el-icon-search" size="mini"  @click="fetchData()">搜索</el-button>
          <el-button icon="el-icon-refresh" size="mini" @click="resetData">重置</el-button>
        </el-row>
      </el-form>
    </div>
```

然后需要实现重置功能:
```js
    // 重置
    resetData(){
      // 清空页面
      this.searchObj = ''
      // 查询所有数据
      this.fetchData()
    }
```


#### 角色删除功能

首先在role.js中定义api
```js
    // 角色删除功能
    removeId(id) {
        return request({
            // url: `/admin/system/sysRole/${page}/${limit}`,
            url: `${api_name}/remove/${id}`,
            method: 'delete',
        })
    },
```

然后在methods中加入方法
```js
// 删除角色
    removeDataById(id) {
      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(() => {
        // 调用方法删除
        
        api.removeId(id).then(response => {

          this.$message({
            type: 'success',
            message: '删除成功!'
          });
          // 查询所有数据
          this.fetchData()
        })
      })
    }
```

之前用那个特别长的字符串做id
然后我就把表给截断了
这边老师出问题了哈哈哈哈

>JavaScript处理整数类型的范围:+-2^(53)
然后老师的处理方案是把id的类型换成string了
我就不换了吧,这样也挺好的

#### 角色添加

搜先设置一个添加按钮
```html
    <!-- 工具条 -->
    <div class="tools-div">
      <el-button type="success" icon="el-icon-plus" size="mini" @click="add">添 加</el-button>
    </div>
```

样式什么的随便加点就行(要在public里面的index里加上)
```css
<style>
    .search-div {
      padding: 10px;
      border: 1px solid #EBEEF5;
      border-radius: 3px;
    }

    .tools-div {
      margin-top: 10px;
      padding: 10px;
      border: 1px solid #EBEEF5;
      border-radius: 3px;
    }
  </style>
```

然后弹出框:
```html
<el-dialog title="添加/修改" :visible.sync="dialogVisible" width="40%">
        <el-form ref="dataForm" :model="sysRole" label-width="150px" size="small" style="padding-right: 40px;">
          <el-form-item label="角色名称">
            <el-input v-model="sysRole.roleName" />
          </el-form-item>
          <el-form-item label="角色编码">
            <el-input v-model="sysRole.roleCode" />
          </el-form-item>
        </el-form>
        <span slot="footer" class="dialog-footer">
          <el-button @click="dialogVisible = false" size="small" icon="el-icon-refresh-right">取 消</el-button>
          <el-button type="primary" icon="el-icon-check" @click="saveOrUpdate()" size="small">确 定</el-button>
        </span>
      </el-dialog>
```

然后就是设置方法了


#### 角色修改

```js
    // 修改方法
    updateRole() {
      api.update(this.sysRole).then(response => {
        // 提示信息
        this.$message({
          type: 'success',
          message: '修改成功!'
        });
        // 关闭弹窗
        this.dialogVisible = false
        // 刷新页面
        this.fetchData()
      })
    },

    // 修改-数据回显
    edit(id){
      this.dialogVisible = true
      api.getRoleId(id).then(response => {
        this.sysRole = response.data
      })
    },
```


api:
```js
// 修改接口要分为两步,先根据id查角色,然后再根据角色修改
    getRoleId(id){
        return request({
            url: `${api_name}/findRoleById/${id}`,
            method: 'get' 
        })
    },

    update(role){
        return request({
            url: `${api_name}/update`,
            method: 'put',
            data:role 
        })
    }
```

#### 批量删除

加了一些东西
主要的方法:
```js
// 批量删除
    batchRemove(){
      // 判断是否选中了--没选中
      if(this.selectValue.length===0){
        // 提示信息
        this.$message.warning('请选择要删除的记录')
        return
      }
      this.$confirm('此操作将永久删除这些角色, 是否继续?', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(() => {
        var idList = []
        // 获取多个复选框对应的id值 ,封装到一个数组中[1,2,3,4]
        // 调用方法删除
        for (var i = 0; i < this.selectValue.length; i++) {
          var obj = this.selectValue[i]
          // id值
          var id = obj.id
          // 放到数组中
          idList.push(id)
        }
        api.batchRemoveId(idList).then(response => {

          this.$message({
            type: 'success',
            message: '删除成功!'
          });
          // 查询所有数据
          this.fetchData()
        })
      })
    },
```

## 用户管理模块

1. 条件分页查询用户
2. 用户添加
3. 用户修改
4. 用户删除
5. **为用户分配角色**
  - 一个用户可以有多个角色
  - 一个角色里面可以有多个用户


首先肯定是要写三层架构么,代码生成器来了
```java
package com.zzmr.system.test;


import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.GlobalConfig;
import com.baomidou.mybatisplus.generator.config.PackageConfig;
import com.baomidou.mybatisplus.generator.config.StrategyConfig;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;

public class CodeGet {

    public static void main(String[] args) {

        // 1、创建代码生成器
        AutoGenerator mpg = new AutoGenerator();

        // 2、全局配置
        // 全局配置
        GlobalConfig gc = new GlobalConfig();
        gc.setOutputDir("D:\\Codefield\\通用权限项目\\zzmr-auth-parent\\service-system"+"/src/main/java");

        // 不加的话，会在service前面加上个I
        gc.setServiceName("%sService");	//去掉Service接口的首字母I
        gc.setAuthor("zzmr");
        gc.setOpen(false);
        mpg.setGlobalConfig(gc);

        // 3、数据源配置
        DataSourceConfig dsc = new DataSourceConfig();
        dsc.setUrl("jdbc:mysql://localhost:3306/guigu-auth?serverTimezone=GMT%2B8&useSSL=false");
        dsc.setDriverName("com.mysql.cj.jdbc.Driver");
        dsc.setUsername("root");
        dsc.setPassword("010203");
        dsc.setDbType(DbType.MYSQL);
        mpg.setDataSource(dsc);

        // 4、包配置
        PackageConfig pc = new PackageConfig();
        pc.setParent("com.zzmr");
        pc.setModuleName("system"); //模块名
        pc.setController("controller");
        pc.setService("service");
        pc.setMapper("mapper");
        mpg.setPackageInfo(pc);

        // 5、策略配置
        StrategyConfig strategy = new StrategyConfig();

        strategy.setInclude("sys_user");

        strategy.setNaming(NamingStrategy.underline_to_camel);//数据库表映射到实体的命名策略

        strategy.setColumnNaming(NamingStrategy.underline_to_camel);//数据库表字段映射到实体的命名策略
        strategy.setEntityLombokModel(true); // lombok 模型 @Accessors(chain = true) setter链式操作

        strategy.setRestControllerStyle(true); //restful api风格控制器
        strategy.setControllerMappingHyphenStyle(true); //url中驼峰转连字符

        mpg.setStrategy(strategy);

        // 6、执行
        mpg.execute();
    }
}
```


像什么控制器方法,就没必要写了
看一下分页查询用户的sql吧
```xml
<resultMap id="sysUserMap" type="com.zzmr.model.system.SysUser" autoMapping="true"></resultMap>

    <select id="selectPage" resultMap="sysUserMap">
        select
        id,username,password,name,phone,head_url,post_id,dept_id,description,status,create_time,update_time,is_deleted
        from sys_user
        <where>
            <if test="vo.keyword!=null and vo.keyword!= ''">
                and (username like concat('%',#{vo.keyword},'%')
                or name like concat('%',#{vo.keyword},'%')
                or phone like concat('%',#{vo.keyword},'%'))
            </if>
            <if test="vo.createTimeBegin != null and vo.createTimeBegin != ''">
                and create_time >= #{vo.createTimeBegin}
            </if>
            <if test="vo.createTimeEnd != null and vo.createTimeEnd != ''">
                and create_time &lt;= #{vo.createTimeEnd}
            </if>
            and is_deleted = 0
        </where>
        order by id desc
    </select>
```


我也不知道笔记该记什么了
好像有用,但好像又没用
这个项目好多东西都是cv
感觉也学不到什么东西


### 更改用户状态
用户状态:1正常,0停用,停用时不能登录后台系统


### 用户分配角色

1. 给用户分配角色
  - 进入分配页面,获取已分配角色与全部角色,进行页面展示
  - 保存分配角色,删除之前分配的角色和保存现在分配的角色

>用户和角色是多对多的
所以有三张表,用户,角色,用户-角色关系表

![20230123175700](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/20230123175700.png)

#### 编写接口


项目用到了大量的CV,但是如果学到这个CV的本领也行啊,现在就是上也不是下也不是

又开始迷茫了
2023年1月23日 20点18分

过几天去新蔡看痘痘
希望她能如约而至


## 菜单管理模块

已经写了用户管理,角色管理两个模块了

**不写那些没用的什么东西了,只把一些小技巧什么的放在这得了**
毕竟代码啥的肯定不能是直接放到这里,因为修修补补,放在这也没什么用

>菜单层级关系表示方式: id和parentid关系
就是一个连续的关系
没啥难的
![23-菜单管理需求分析](https://gcore.jsdelivr.net/gh/jimmy66886/picgo_two@main/img/23-菜单管理需求分析.png)



### 给角色分配权限

哈哈哈哈哈
买了个腾讯云服务器
88一年,先装了个宝塔Linux面板,其他啥都没弄呢

#### 编写接口

1. 进入分配界面:获取全部菜单及按钮,选中已选复选框,进行页面展示
2. 保存分配权限:删除之前分配的权限和保存现在分配的权限


嗯,写了,但没完全写
>**大量的cv已经让我对这个项目越来越陌生了**



## 权限管理模块

1. 菜单权限

2. 按钮权限

3. 数据权限


两个接口
1. 用户登录接口
2. 获取登录用户信息


### token

按一定规则生成的字符串

token如何实现共享
1. 每次登录,登录成功之后,返回生成token字符串
2. 前端把返回token放到cookie里面(cookie不能跨域传递)
3. 每次发送请求携带这个token发送(把token值放到请求头中)

生成token工具**JWT**

**JWT头,有效载荷,签名哈希**三个部分


JwtHelper.java工具类


```java
package com.zzmr.common.utils;

import io.jsonwebtoken.*;
import org.springframework.util.StringUtils;

import java.util.Date;

/**
 * 生成JSON Web令牌的工具类
 */
public class JwtHelper {

    private static long tokenExpiration = 365 * 24 * 60 * 60 * 1000;
    // 加密密钥
    private static String tokenSignKey = "123456";

    // 用户id  用户名称  生成token字符串
    public static String createToken(Long userId, String username) {
        String token = Jwts.builder()
                .setSubject("AUTH-USER")
                .setExpiration(new Date(System.currentTimeMillis() + tokenExpiration))
                .claim("userId", userId)
                .claim("username", username)
                .signWith(SignatureAlgorithm.HS512, tokenSignKey)
                .compressWith(CompressionCodecs.GZIP)
                .compact();
        return token;
    }

    // 从token字符串中获取用户id
    public static Long getUserId(String token) {
        try {
            if (StringUtils.isEmpty(token)) return null;

            Jws<Claims> claimsJws = Jwts.parser().setSigningKey(tokenSignKey).parseClaimsJws(token);
            Claims claims = claimsJws.getBody();
            Integer userId = (Integer) claims.get("userId");
            return userId.longValue();
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    // 从token中获取username
    public static String getUsername(String token) {
        try {
            if (StringUtils.isEmpty(token)) return "";

            Jws<Claims> claimsJws = Jwts.parser().setSigningKey(tokenSignKey).parseClaimsJws(token);
            Claims claims = claimsJws.getBody();
            return (String) claims.get("username");
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void main(String[] args) {
        String token = JwtHelper.createToken(1L, "zzmr");
        System.out.println(token);

        Long userId = JwtHelper.getUserId(token);
        String username = JwtHelper.getUsername(token);
        System.out.println(userId + " " + username);


    }
}
```

```
eyJhbGciOiJIUzUxMiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAKtWKi5NUrJScgwN8dANDXYNUtJRSq0oULIyNDM3MzQ3Mjc31lEqLU4t8kwBikGYeYm5qUAtVVW5RUq1AHweP69BAAAA.PMvOP135Vft5QT6JbmdhIUdxVBMnxwLTD1duqB9lq8mB23AiLbjstdocY_7n2SBI6EiIUon-YZkchCScG-0QxQ
```


### 这就到总结了

权限测试方式:
1. 使用超级管理员登录
  - 创建新用户
  - 为新用户分配角色(新建角色)
  - 为角色分配菜单和按钮权限

2. 使用新创建用户进行登录
  - 进行查看


测试成功


## Spring Security

没学过的东西

但是现在项目有一个问题,就是后端的接口,如果没有登录,也是可以直接访问的(直接通过浏览器路径访问)

所以需要在后端进行限制

创建模块,引入依赖


天上星河转
今天晚上把这玩意看完得了


还要搞redis
可是我没有这个环境啊

好,很明显,没有redis,根本写不了后面这个
所以,明天把redis安装一下
然后再试吧
看来只能明天再解决这个项目了

郁闷了
这个redis还是搞不好
虽然服务器上已经安装好了
害

启动redis
/www/server/redis/src/redis-server
为什么是这个命令?

妈的
还是搞不明白
卸了吧,自己装一个redis,不用宝塔提供的了


安装教程:https://www.cnblogs.com/guozhiqiang/p/16882429.html
终于啊,终于弄好了
我算是搞明白一些基本操作了

编辑文件vi xxx
保存的时候,先按esc,然后按:,再输入x回车
就行了
我的ip地址
**1.14.102.11**

没设置密码,然后用户名就是default

开启redis:
先在根目录(cd ../)
打开redis-6.0.6
打开src,执行./redis-server ../redis.conf
服务就开启了

关闭呢?

## 日志功能


妈的
服务器刚买就被攻击了
真是日了狗了

重装了系统,再重装一下redis

然后看怎么安全怎么来

## 结尾

直接快进到打包运行

后端打包和前端打包
SpringBoot工程打成jar包
Vue工程使用npm打包
我就不打了,也没必要打包
笑死
结束了
匆匆忙忙就结束了

打包结束
一个jar,一个也是使用npm run build
然后放到nginx中就行了

2023年1月27日 16点48分
都写了个啥啊,乐死了

